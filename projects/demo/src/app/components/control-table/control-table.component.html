<table [attr.cellPadding]="cellPadding()">
  <caption>
    @let name = controlName();
    <span>{{ (name ? name + " " : "") + (configType() | titlecase) }} controls</span>
  </caption>

  <thead>
    <tr>
      <th align="left">Name</th>
      <th align="left">Description</th>
      <th align="left">Type</th>
      <th align="left">Default</th>
      <th align="left">Value</th>
    </tr>
  </thead>

  <tbody>
    @for (control of _flatControls(); track $index) {
      <tr>
        <td>{{ control.name }}</td>
        <td>{{ control.description }}</td>
        <td>
          <code>{{ control.type }}</code>
        </td>
        <td>
          <code>{{ control.default }}</code>
        </td>
        <td>
          @let disabled = control.disabled ?? false;

          @switch (control.control) {
            @case ("checkbox") {
              <input
                type="checkbox"
                [name]="control.name"
                [id]="control.name"
                [disabled]="disabled"
                [(ngModel)]="model()[control.name]"
                (ngModelChange)="control.onModelChange?.()"
              />
            }
            @case ("select") {
              <select [disabled]="disabled" [(ngModel)]="model()[control.name]" (ngModelChange)="control.onModelChange?.()">
                @for (item of control.list; track $index) {
                  <option [value]="item">{{ item }}</option>
                }
              </select>
            }
            @case ("number") {
              <input
                type="number"
                [name]="control.name"
                [id]="control.name"
                [disabled]="disabled"
                [attr.min]="control.min"
                [attr.step]="control.step"
                [(ngModel)]="model()[control.name]"
                (ngModelChange)="control.onModelChange?.()"
              />
            }
            @default {
              <input
                type="text"
                [name]="control.name"
                [id]="control.name"
                [disabled]="disabled"
                [(ngModel)]="model()[control.name]"
                (ngModelChange)="control.onModelChange?.()"
              />
            }
          }
        </td>
      </tr>
    }
  </tbody>
</table>
